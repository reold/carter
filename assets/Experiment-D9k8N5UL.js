import{Z as ce,o as re,a0 as de,p as oe,a as ee,B as ve,w as te,a1 as l,i as n,h as D,C as ne,b as ie,t as x,e as m,c as p,D as he,f as $,s as i,j as q,E as w,g as _,d as se,F as ae,I as pe}from"./index-D9OO_WAk.js";import{i as Y}from"./if-D-Bg59Ce.js";import{b as W}from"./_commonjsHelpers-VtfsyDff.js";import{s as xe,L as fe}from"./Lyrics-CINP-40_.js";import{e as we,i as be}from"./each-Czn-2FYz.js";import{b as ye}from"./this-Crh4RdfS.js";import{S as _e}from"./Sheet-CsUdCbJI.js";import{p as O}from"./services.svelte-Tr3niDee.js";function le(e,r,s){if(e.multiple)return Ie(e,r);for(var o of e.options){var t=z(o);if(de(t,r)){o.selected=!0;return}}(!s||r!==void 0)&&(e.selectedIndex=-1)}function ge(e,r){re(()=>{var s=new MutationObserver(()=>{var o=e.__value;le(e,o)});return s.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{s.disconnect()}})}function ke(e,r,s=r){var o=!0;ce(e,"change",t=>{var v=t?"[selected]":":checked",h;if(e.multiple)h=[].map.call(e.querySelectorAll(v),z);else{var j=e.querySelector(v)??e.querySelector("option:not([disabled])");h=j&&z(j)}s(h)}),re(()=>{var t=r();if(le(e,t,o),o&&t===void 0){var v=e.querySelector(":checked");v!==null&&(t=z(v),s(t))}e.__value=t,o=!1}),ge(e)}function Ie(e,r){for(var s of e.options)s.selected=~r.indexOf(z(s))}function z(e){return"__value"in e?e.__value:e.value}var Se=x('<span class="text-black/50 dark:text-white/50"> </span> JAM Session',1),je=x('<span class="text-black/50 dark:text-white/50 text-sm"> </span> ',1),Me=x('<h1 class="text-black dark:text-white select-none truncate max-w-[80dvw]"><!></h1>'),Ae=x(`<input type="text" name="room title" id="room title" placeholder="Session Name, e.g., Varun's Party Music" class="bg-white/5 ring-0 focus:outline-hidden rounded-md py-1 px-2 text-white" autocomplete="off">`),Ce=(e,r,s,o)=>{r().create?s():o()},Ne=x(`<p class="text-black dark:text-white text-sm select-none">JAM Sessions let you and your friends enjoy music together, no matter
        where you are in the world. <span class=" text-black/50 dark:text-white/50">Your client ID is unique to your browser. If you switch browsers,
          you'll need to start a new session, as your previous one cannot be
          resumed.</span></p> <div class="flex flex-col space-y-2 w-[95dvw] mt-[5dvh]"><p class="text-red-500 text-xs"> </p> <div class="text-white flex flex-row items-center bg-white/5 rounded-md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-[1.2em] ml-2"><path fill-rule="evenodd" d="M17.834 6.166a8.25 8.25 0 1 0 0 11.668.75.75 0 0 1 1.06 1.06c-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788 3.807-3.808 9.98-3.808 13.788 0A9.722 9.722 0 0 1 21.75 12c0 .975-.296 1.887-.809 2.571-.514.685-1.28 1.179-2.191 1.179-.904 0-1.666-.487-2.18-1.164a5.25 5.25 0 1 1-.82-6.26V8.25a.75.75 0 0 1 1.5 0V12c0 .682.208 1.27.509 1.671.3.401.659.579.991.579.332 0 .69-.178.991-.579.3-.4.509-.99.509-1.671a8.222 8.222 0 0 0-2.416-5.834ZM15.75 12a3.75 3.75 0 1 0-7.5 0 3.75 3.75 0 0 0 7.5 0Z" clip-rule="evenodd"></path></svg> <input type="text" name="username" id="username" placeholder="Username" class="bg-transparent ring-0 focus:outline-hidden w-full py-1 pr-2" autocomplete="username"></div> <!> <p class="text-zinc-500 flex flex-row items-center space-x-2 h-[2ch] overflow-hidden"><span class="text-xs">room-id:</span> <span class="truncate w-[75dvw] inline-block text-xs whitespace-nowrap"> </span></p> <button class="text-white bg-purple-500 rounded-md font-bold select-none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-[1em] inline"><path fill-rule="evenodd" d="M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z" clip-rule="evenodd"></path></svg> </button></div>`,1),qe=(e,r)=>r(),Ye=x('<p><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-[0.8em] inline -mr-1"><path fill-rule="evenodd" d="M17.834 6.166a8.25 8.25 0 1 0 0 11.668.75.75 0 0 1 1.06 1.06c-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788 3.807-3.808 9.98-3.808 13.788 0A9.722 9.722 0 0 1 21.75 12c0 .975-.296 1.887-.809 2.571-.514.685-1.28 1.179-2.191 1.179-.904 0-1.666-.487-2.18-1.164a5.25 5.25 0 1 1-.82-6.26V8.25a.75.75 0 0 1 1.5 0V12c0 .682.208 1.27.509 1.671.3.401.659.579.991.579.332 0 .69-.178.991-.579.3-.4.509-.99.509-1.671a8.222 8.222 0 0 0-2.416-5.834ZM15.75 12a3.75 3.75 0 1 0-7.5 0 3.75 3.75 0 0 0 7.5 0Z" clip-rule="evenodd"></path></svg> </p>'),Ze=x('<p class="text-xs ml-auto"> </p>'),Ee=x('<div><!> <p class="px-2 text-white -mt-[0.2em] text-base"> </p> <!></div>'),Be=(e,r)=>{e.key=="Enter"&&r()},Oe=(e,r)=>r(),$e=x('<div class="w-dvw h-[80dvh] max-h-[70dvh] overflow-y-scroll overflow-x-hidden text-white ring-1 ring-white/5 mb-2"><div class="sticky top-0 flex flex-row justify-end border-b-0 w-dvw h-[5dvh]"><button aria-label="copy session invite link" class="w-[15%] flex flex-col items-center justify-center rounded-bl-md overflow-hidden p-0 m-0 max-h-[3em] select-none bg-linear-to-b from-black/10 dark:from-white/10 to-black/5 dark:to-white/5 backdrop-blur-3xl"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="text-violet-500 aspect-square p-[0.1em] h-[2em] inline-block"><path fill-rule="evenodd" d="M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z" clip-rule="evenodd"></path></svg></button></div> <!></div> <div class="text-white flex flex-row items-center bg-white/5 rounded-md w-[95dvw] bg-red-500"><input type="text" name="message" id="message" placeholder="send a message" autocomplete="off" class="bg-transparent ring-0 focus:outline-hidden w-full py-1 pl-2"> <button class="p-0 m-0 select-none" aria-label="send message"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-[1.2em] mr-2"><path d="M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"></path></svg></button></div>',1);function De(e,r){oe(r,!0);let s=ee(r,"visible",15,!1),o=ee(r,"info",19,()=>({create:!0,roomId:""})),t=ve({username:"",sessionName:"",warning:""}),v=D(void 0);te(()=>{var b;l.room.messages,(b=n(v))==null||b.scrollTo({top:n(v).scrollHeight,behavior:"smooth"})}),te(()=>{var b;s()&&!l.initialized&&(o().create?O.init(!0):O.init(!1,{id:o().roomId}),(b=l.peer)==null||b.on("error",L=>{console.error("PeerJS error:",L),l.room.messages=[...l.room.messages,{username:"server",content:`Error: ${L.type}`,time:String(Date.now()/1e3)}]}))}),ne(()=>()=>{O.close()});const h=()=>{if(t.username=t.username.trim(),t.username.length<4){t.warning="username must be more than 3 characters in length";return}t.sessionName.length==0&&(t.sessionName=`${t.username}'s session`),l.user.name=t.username,O.create(t.sessionName)},j=()=>{if(!o().roomId){t.warning="room id is required";return}if(t.username=t.username.trim(),t.username.length<4){t.warning="username must be more than 3 characters in length";return}if(!o().roomId||!l.initialized){t.warning="Invalid room ID or peer not initialized. Please try again.";return}l.user.name=t.username,console.log("joining room",o().roomId),O.join()},Z=()=>{n(g).length&&(O.chat.send(n(g)),_(g,""))},J=()=>{navigator.clipboard.writeText(`${window.location.host+window.location.pathname}#join${l.room.id}`),l.room.messages=[...l.room.messages,{username:"svara",content:"invite link copied to clipboard",time:String(Date.now()/1e3)}]};let g=D("");_e(e,{get visible(){return s()},set visible(k){s(k)},title:k=>{var I=Me(),U=m(I);{var E=u=>{var d=Se(),a=$(d),c=m(a);q(()=>w(c,o().create?"Create:":"Join:")),p(u,d)},P=u=>{var d=je(),a=$(d),c=m(a),M=i(a);q(()=>{w(c,l.room.activity),w(M,` ${l.room.name??""}`)}),p(u,d)};Y(U,u=>{l.connected?u(P,!1):u(E)})}p(k,I)},body:k=>{var I=he(),U=$(I);{var E=u=>{var d=Ne(),a=i($(d),2),c=m(a),M=m(c),F=i(c,2),G=i(m(F),2),B=i(F,2);{var R=C=>{var V=Ae();W(V,()=>t.sessionName,X=>t.sessionName=X),p(C,V)};Y(B,C=>{o().create&&C(R)})}var S=i(B,2),f=i(m(S),2),T=m(f),A=i(S,2);A.__click=[Ce,o,h,j];var H=i(m(A));q(()=>{w(M,t.warning),w(T,l.room.id),xe(A,"aria-label",`${o().create?"create":"join"} jam session`),w(H,` ${o().create?"create":"join"}`)}),W(G,()=>t.username,C=>t.username=C),p(u,d)},P=u=>{var d=$e(),a=$(d),c=m(a),M=m(c);M.__click=[qe,J];var F=i(c,2);we(F,17,()=>l.room.messages,be,(S,f,T)=>{var A=Ee(),H=m(A);{var C=N=>{var y=Ye(),K=i(m(y));q(Q=>{ae(y,1,`${Q??""} text-lg font-medium px-0.5 rounded-r-md inline-block max-w-[95%] truncate`),w(K,` ${n(f).username??""}`)},[()=>["server","svara"].includes(n(f).username)?"text-red-400":"text-purple-400"]),p(N,y)};Y(H,N=>{var y;((y=l.room.messages[T-1])==null?void 0:y.username)!==n(f).username&&N(C)})}var V=i(H,2),X=m(V),me=i(V,2);{var ue=N=>{var y=Ze(),K=m(y);q(Q=>w(K,Q),[()=>new Date(Number(n(f).time)*1e3).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit",hour12:!0})]),p(N,y)};Y(me,N=>{n(f).time&&N(ue)})}q(()=>{ae(A,1,`${n(f).username==l.user.name?"ml-auto rounded-br-none mr-1":"rounded-bl-none ml-1"} ${T-1!==-1&&l.room.messages[T-1].username===n(f).username?"mt-[0.25em]":"mt-[0.5em]"} rounded-lg p-1 bg-white/5 flex flex-col items-start justify-center w-fit min-w-[20dvw] max-w-[80dvw]`),w(X,n(f).content)}),p(S,A)}),ye(a,S=>_(v,S),()=>n(v));var G=i(a,2),B=m(G);B.__keyup=[Be,Z];var R=i(B,2);R.__click=[Oe,Z],W(B,()=>n(g),S=>_(g,S)),p(u,d)};Y(U,u=>{l.connected?u(P,!1):u(E)})}p(k,I)},$$slots:{title:!0,body:!0}}),ie()}se(["click","keyup"]);var Je=x('<input type="text" placeholder="room url">'),Le=(e,r)=>_(r,!0),Ue=x('<p class="text-white">Welcome to experiment page. Basic backend loaded for isolated sandbox.</p> <select name="jam type" id="jam-type"><option>create</option><option>join</option></select> <!> <button class="bg-white">continue</button> <!> <h1 class="text-white"> </h1> <div class="flex flex-col items-center justify-center text-black dark:text-white bg-white dark:bg-black"><!></div>',1);function Re(e,r){oe(r,!0);let s=D("create"),o=D(""),t=D(!1),v=JSON.parse(`[{"time":3.81,"text":"Ayy, ayy, ayy, ayy (ooh)"},{"time":8.75,"text":"Ooh, ooh, ooh, oooh (ooh)"},{"time":14.32,"text":"Ayy, ayy"},{"time":19.38,"text":"Ooh, ooh, ooh, oooh"},{"time":26.91,"text":"Needless to say, I keep her in check"},{"time":29.45,"text":"She was all bad-bad, nevertheless (yeah)"},{"time":32.48,"text":"Callin' it quits now, baby, I'm a wreck (wreck)"},{"time":35.23,"text":"Crash at my place, baby, you're a wreck (wreck)"},{"time":37.49,"text":"Needless to say, I'm keeping her in check"},{"time":40.05,"text":"She was all bad-bad, nevertheless"},{"time":43.06,"text":"Callin' it quits now, baby, I'm a wreck"},{"time":45.62,"text":"Crash at my place, baby, you're a wreck"},{"time":48.29,"text":"Thinkin' in a bad way, losin' your grip"},{"time":50.87,"text":"Screamin' at my face, baby, don't trip"},{"time":53.6,"text":"Someone took a big L, don't know how that felt"},{"time":56.21,"text":"Lookin' at you sideways, party on tilt"},{"time":59.01,"text":"Ooh-ooh, some things you just can't refuse"},{"time":64.12,"text":"She wanna ride me like a cruise"},{"time":66.59,"text":"And I'm not tryna lose"},{"time":70.46000000000001,"text":"Then you're left in the dust"},{"time":73.23,"text":"Unless I stuck by ya"},{"time":75.83,"text":"You're the sunflower"},{"time":78.86,"text":"I think your love would be too much"},{"time":81.1,"text":"Or you'll be left in the dust"},{"time":84.01,"text":"Unless I stuck by ya"},{"time":86.45,"text":"You're the sunflower"},{"time":89.11,"text":"You're the sunflower"},{"time":91.25,"text":"Every time I'm leavin' on ya"},{"time":93.72999999999999,"text":"You don't make it easy, no, no"},{"time":96.67,"text":"Wish I could be there for ya"},{"time":99.32,"text":"Give me a reason to go"},{"time":102.44,"text":"Every time I'm walkin' out"},{"time":104.22999999999999,"text":"I can hear you tellin' me to turn around"},{"time":107.14,"text":"Fightin' for my trust and you won't back down"},{"time":109.72,"text":"Even if we gotta risk it all right now, oh"},{"time":112.84,"text":"I know you're scared of the unknown (known)"},{"time":115.28,"text":"You don't wanna be alone (alone)"},{"time":117.9,"text":"I know I always come and go (and go)"},{"time":120.48,"text":"But it's out of my control"},{"time":123.58,"text":"And you'll be left in the dust"},{"time":126.76,"text":"Unless I stuck by ya"},{"time":129.45,"text":"You're the sunflower"},{"time":132.19,"text":"I think your love would be too much"},{"time":134.44,"text":"Or you'll be left in the dust"},{"time":137.32,"text":"Unless I stuck by ya"},{"time":139.49,"text":"You're the sunflower"},{"time":142.45,"text":"You're the sunflower"},{"time":144.73,"text":"Yeah"}]`),h=D(0);ne(()=>{const a=setInterval(()=>{_(h,n(h)+1)},1e3);return()=>clearInterval(a)});var j=Ue(),Z=i($(j),2),J=m(Z);J.value=J.__value="create";var g=i(J);g.value=g.__value="join";var b=i(Z,2);{var L=a=>{var c=Je();W(c,()=>n(o),M=>_(o,M)),p(a,c)};Y(b,a=>{n(s)=="join"&&a(L)})}var k=i(b,2);k.__click=[Le,t];var I=i(k,2);{var U=a=>{const c=pe(()=>n(s)=="join"?{create:!1,roomId:new URL(n(o)).hash.split("#join")[1]}:{create:!0});De(a,{visible:!0,get info(){return n(c)}})};Y(I,a=>{n(t)&&a(U)})}var E=i(I,2),P=m(E),u=i(E,2),d=m(u);fe(d,{content:v,handleSeek:a=>_(h,a,!0),get time(){return n(h)},set time(a){_(h,a,!0)}}),q(()=>w(P,`t: ${n(h)??""}`)),ke(Z,()=>n(s),a=>_(s,a)),p(e,j),ie()}se(["click"]);export{Re as default};
