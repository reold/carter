(function(){"use strict";const s=async(a,e)=>{if(e.includes("/")){let n=e.split("/")[0];return await s(await a.getDirectoryHandle(n),e.slice(n.length+1))}else return await a.getFileHandle(e,{create:!0})};self.onmessage=async a=>{let{mode:e,path:n,content:c,id:i}=a.data,r;typeof c=="string"?r=new TextEncoder().encode(c):c instanceof Blob&&(r=await c.arrayBuffer());let o=await navigator.storage.getDirectory(),l=await s(o,n);switch(e){case"write":const t=await l.createSyncAccessHandle();t.truncate(0),t.write(r),t.flush(),t.close();break}self.postMessage(i)}})();
